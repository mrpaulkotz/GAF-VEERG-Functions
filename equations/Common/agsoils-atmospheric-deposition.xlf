/*
============================================================================
National Inventory Report 2023 reference:
Agricultural soils: Atmospheric deposition (3.D.b.1)
============================================================================
*/

/* 
--------------------------------------
COMMON_LIVESTOCK_AGSOILS_ATMOSPHERIC_DEPOSITION
Atmospheric deposition emissions from urine and dung deposited by grazing animals on pasture,
range and paddock
EN2Oad
t N2O
EN2Oad = Mvolm * EFad * CgN2O * 10^-3
Mvolm :Mmass of nitrogen volatilised from urine and faeces deposited on pasture : kg N
EFad : Emission factor for atmospheric deposition : kg N2O-N/kg N
CgN2O : Factor to convert elemental mass of N2O to molecular mass
--------------------------------------
*/
COMMON_LIVESTOCK_AGSOILS_ATMOSPHERIC_DEPOSITION_GWP
 =LAMBDA(
    EN2Oad,GWPN2O,
     (EN2Oad * GWPN2O)
   );

COMMON_LIVESTOCK_AGSOILS_ATMOSPHERIC_DEPOSITION
  =LAMBDA(
    Mvolm,Efad,CgN2O,
    (Mvolm * Efad * CgN2O * 10^-3)
  )
;

COMMON_LIVESTOCK_AGSOILS_ATMOSPHERIC_DEPOSITION_Title
  =LAMBDA("Atmospheric deposition emissions from urine and dung deposited by grazing animals on pasture, range and paddock");

COMMON_LIVESTOCK_AGSOILS_ATMOSPHERIC_DEPOSITION_Variable
  =LAMBDA("EN2Oad");

COMMON_LIVESTOCK_AGSOILS_ATMOSPHERIC_DEPOSITION_Unit
  =LAMBDA("t N2O");

COMMON_LIVESTOCK_AGSOILS_ATMOSPHERIC_DEPOSITION_NIRReference
  =LAMBDA("National Inventory Report Volume 1, 2023: 3.D.B_4");

COMMON_LIVESTOCK_AGSOILS_ATMOSPHERIC_DEPOSITION_ReadableEquation
  =LAMBDA("EN2Oad = Mvolm * EFad * CgN2O * 10 ^ - 3");

COMMON_LIVESTOCK_AGSOILS_ATMOSPHERIC_DEPOSITION_Arguments
  =LAMBDA(
    MAKEARRAY(3, 3, 
      LAMBDA(r,c, 
        INDEX({
          "Mvolm","Mass of nitrogen volatilised from urine and faeces deposited on pasture","kg N";
          "EFad","Emission factor for atmospheric deposition","kg N2O-N/kg N";
          "CgN2O","Factor to convert elemental mass of N2O to molecular mass",""
        }, r, c)
      )
    )
  );

/* 
--------------------------------------
COMMON_LIVESTOCK_AGSOILS_MASS_VOLATILISED_ANIMAL_WASTE
The mass of nitrogen volatilised from manure, urine and faeces deposited on soils
Mvolm
kg N
Mvolm = (MNjm + UNjm + FNjm) * FracGASMsoil
MNjm : Mass of manure nitrogen applied to soils : kg N
UNjm : Mass of urine nitrogen excreted on pasture, range and paddock for each dairy cattle class : kg N
FNjm : Mass of faecal nitrogen excreted on pasture, range and paddock for each dairy cattle class : kg N
FracGASMsoil : Fraction of nitrogen volatilised from urine and faeces deposited on pasture : (kg NH3-N + NOx-N)/kg N

--------------------------------------
*/


COMMON_LIVESTOCK_AGSOILS_MASS_VOLATILISED_ANIMAL_WASTE
  =LAMBDA(
    MNjm, UNjm, FNjm, FracGASMsoil,
    (MNjm + UNjm + FNjm) * FracGASMsoil
  )
;

COMMON_LIVESTOCK_AGSOILS_MASS_VOLATILISED_ANIMAL_WASTE_Title
  =LAMBDA("Mass of nitrogen volatilised from manure, urine and faeces deposited on soils");

COMMON_LIVESTOCK_AGSOILS_MASS_VOLATILISED_ANIMAL_WASTE_Variable
  =LAMBDA("Mvolm");

COMMON_LIVESTOCK_AGSOILS_MASS_VOLATILISED_ANIMAL_WASTE_Unit
  =LAMBDA("kg N");

COMMON_LIVESTOCK_AGSOILS_MASS_VOLATILISED_ANIMAL_WASTE_NIRReference
  =LAMBDA("National Inventory Report Volume 1, 2023: 3.D.B_2");

COMMON_LIVESTOCK_AGSOILS_MASS_VOLATILISED_ANIMAL_WASTE_ReadableEquation
  =LAMBDA("Mvolm = (MNjm + UNjm + FNjm) * FracGASMsoil");

COMMON_LIVESTOCK_AGSOILS_MASS_VOLATILISED_ANIMAL_WASTE_Arguments
  =LAMBDA(
    MAKEARRAY(4, 3, 
      LAMBDA(r,c, 
        INDEX({
          "MNjm","Mass of manure nitrogen applied to soils","kg N";
          "UNjm","Mass of urine nitrogen excreted on pasture, range and paddock for each dairy cattle class","kg N";
          "FNjm","Mass of faecal nitrogen excreted on pasture, range and paddock for each dairy cattle class","kg N";
          "FracGASMsoil","Fraction of nitrogen volatilised from urine and faeces deposited on pasture","(kg NH3-N + NOx-N)/kg N"
        }, r, c)
      )
    )
  );


/* 
--------------------------------------
COMMON_LIVESTOCK_AGSOILS_MASS_VOLATILISED_SYNTHETIC_FERTILISER
The mass of nitrogen volatilised from inorganic fertiliser applied to soils
Mvolinorganic
kg N
Mvolinorganic = MNf * FracGASFf
MNf :Mass of nitrogen in inorganic fertiliser applied : kg N
FracGASFf : Fraction of inorganic fertiliser that volatilises : (kg NH3–N + NOx–N)/kg N
--------------------------------------
*/


COMMON_LIVESTOCK_AGSOILS_MASS_VOLATILISED_SYNTHETIC_FERTILISER
  =LAMBDA(
    MNf, FracGASFf,
    MNf * FracGASFf
  )
;

COMMON_LIVESTOCK_AGSOILS_MASS_VOLATILISED_SYNTHETIC_FERTILISER_Title
  =LAMBDA("Mass of nitrogen volatilised from synthetic fertiliser deposited on soils");

COMMON_LIVESTOCK_AGSOILS_MASS_VOLATILISED_SYNTHETIC_FERTILISER_Variable
  =LAMBDA("Mvolinorganic");

COMMON_LIVESTOCK_AGSOILS_MASS_VOLATILISED_SYNTHETIC_FERTILISER_Unit
  =LAMBDA("kg N");

COMMON_LIVESTOCK_AGSOILS_MASS_VOLATILISED_SYNTHETIC_FERTILISER_NIRReference
  =LAMBDA("National Inventory Report Volume 1, 2023: 3.D.B_1");

COMMON_LIVESTOCK_AGSOILS_MASS_VOLATILISED_SYNTHETIC_FERTILISER_ReadableEquation
  =LAMBDA("Mvolinorganic = MNf * FracGASFf");

COMMON_LIVESTOCK_AGSOILS_MASS_VOLATILISED_SYNTHETIC_FERTILISER_Arguments
  =LAMBDA(
    MAKEARRAY(2, 3, 
      LAMBDA(r,c, 
        INDEX({
          "MNf","Mass of nitrogen in inorganic fertiliser applied","kg N";
          "FracGASFf","Fraction of inorganic fertiliser that volatilises","(kg NH3–N + NOx–N)/kg N"
        }, r, c)
      )
    )
  );