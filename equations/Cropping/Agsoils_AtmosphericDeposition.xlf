/*
============================================================================
National Inventory Report 2023 reference:
Agricultural soils: Atmospheric deposition (3.D.b.1)
============================================================================
*/

/* 
--------------------------------------
Agsoils_AtmosphericDeposition
Atmospheric deposition emissions from urine and dung deposited by grazing animals on pasture,
range and paddock
EN2Oad
t N2O
EN2Oad = Mvolm * EFad * CgN2O * 10^-3
Mvolm :Mmass of nitrogen volatilised from urine and faeces deposited on pasture : kg N
EFad : Emission factor for atmospheric deposition : kg N2O-N/kg N
CgN2O : Factor to convert elemental mass of N2O to molecular mass
--------------------------------------
*/
Agsoils_AtmosphericDeposition_GWP
 =LAMBDA(
    EN2Oad,GWPN2O,
     (EN2Oad * GWPN2O)
   );

Agsoils_AtmosphericDeposition
  =LAMBDA(
    Mvolm,Efad,CgN2O,
    (Mvolm * Efad * CgN2O * 10^-3)
  )
;

Agsoils_AtmosphericDeposition_Title
  =LAMBDA("Atmospheric deposition emissions from urine and dung deposited by grazing animals on pasture, range and paddock");

Agsoils_AtmosphericDeposition_Variable
  =LAMBDA("EN2Oad");

Agsoils_AtmosphericDeposition_Unit
  =LAMBDA("t N2O");

Agsoils_AtmosphericDeposition_NIRReference
  =LAMBDA("National Inventory Report Volume 1, 2023: 3.D.B_4");

Agsoils_AtmosphericDeposition_ReadableEquation
  =LAMBDA("EN2Oad = Mvolm * EFad * CgN2O * 10 ^ - 3");

Agsoils_AtmosphericDeposition_Arguments
  =LAMBDA(
    MAKEARRAY(3, 3, 
      LAMBDA(r,c, 
        INDEX({
          "Mvolm","Mass of nitrogen volatilised from urine and faeces deposited on pasture","kg N";
          "EFad","Emission factor for atmospheric deposition","kg N2O-N/kg N";
          "CgN2O","Factor to convert elemental mass of N2O to molecular mass",""
        }, r, c)
      )
    )
  );

/* 
--------------------------------------
Agsoils_MassVolatilisedAnimalWaste
The mass of nitrogen volatilised from manure, urine and faeces deposited on soils
Mvolm
kg N
Mvolm = (MNjm + UNjm + FNjm) * FracGASMsoil
MNjm : Mass of manure nitrogen applied to soils : kg N
UNjm : Mass of urine nitrogen excreted on pasture, range and paddock for each dairy cattle class : kg N
FNjm : Mass of faecal nitrogen excreted on pasture, range and paddock for each dairy cattle class : kg N
FracGASMsoil : Fraction of nitrogen volatilised from urine and faeces deposited on pasture : (kg NH3-N + NOx-N)/kg N

--------------------------------------
*/


Agsoils_MassVolatilisedAnimalWaste
  =LAMBDA(
    MNjm, UNjm, FNjm, FracGASMsoil,
    (MNjm + UNjm + FNjm) * FracGASMsoil
  )
;

Agsoils_MassVolatilisedAnimalWaste_Title
  =LAMBDA("Mass of nitrogen volatilised from manure, urine and faeces deposited on soils");

Agsoils_MassVolatilisedAnimalWaste_Variable
  =LAMBDA("Mvolm");

Agsoils_MassVolatilisedAnimalWaste_Unit
  =LAMBDA("kg N");

Agsoils_MassVolatilisedAnimalWaste_NIRReference
  =LAMBDA("National Inventory Report Volume 1, 2023: 3.D.B_2");

Agsoils_MassVolatilisedAnimalWaste_ReadableEquation
  =LAMBDA("Mvolm = (MNjm + UNjm + FNjm) * FracGASMsoil");

Agsoils_MassVolatilisedAnimalWaste_Arguments
  =LAMBDA(
    MAKEARRAY(4, 3, 
      LAMBDA(r,c, 
        INDEX({
          "MNjm","Mass of manure nitrogen applied to soils","kg N";
          "UNjm","Mass of urine nitrogen excreted on pasture, range and paddock for each dairy cattle class","kg N";
          "FNjm","Mass of faecal nitrogen excreted on pasture, range and paddock for each dairy cattle class","kg N";
          "FracGASMsoil","Fraction of nitrogen volatilised from urine and faeces deposited on pasture","(kg NH3-N + NOx-N)/kg N"
        }, r, c)
      )
    )
  );


/* 
--------------------------------------
Agsoils_MassVolatilisedInorganicFertiliser
The mass of nitrogen volatilised from inorganic fertiliser applied to soils
Mvolinorganic
kg N
Mvolinorganic = MNf * FracGASFf
MNf :Mass of nitrogen in inorganic fertiliser applied : kg N
FracGASFf : Fraction of inorganic fertiliser that volatilises : (kg NH3–N + NOx–N)/kg N
--------------------------------------
*/


Agsois_MassVolatilisedInorganicFertiliser
  =LAMBDA(
    MNf, FracGASFf,
    MNf * FracGASFf
  )
;

Agsois_MassVolatilisedInorganicFertiliser_Title
  =LAMBDA("Mass of nitrogen volatilised from inorganic fertiliser deposited on soils");

Agsois_MassVolatilisedInorganicFertiliser_Variable
  =LAMBDA("Mvolinorganic");

Agsois_MassVolatilisedInorganicFertiliser_Unit
  =LAMBDA("kg N");

Agsois_MassVolatilisedInorganicFertiliser_NIRReference
  =LAMBDA("National Inventory Report Volume 1, 2023: 3.D.B_1");

Agsois_MassVolatilisedInorganicFertiliser_ReadableEquation
  =LAMBDA("Mvolinorganic = MNf * FracGASFf");

Agsois_MassVolatilisedInorganicFertiliser_Arguments
  =LAMBDA(
    MAKEARRAY(2, 3, 
      LAMBDA(r,c, 
        INDEX({
          "MNf","Mass of nitrogen in inorganic fertiliser applied","kg N";
          "FracGASFf","Fraction of inorganic fertiliser that volatilises","(kg NH3–N + NOx–N)/kg N"
        }, r, c)
      )
    )
  );